---
title: "Module1"
author: "Lotte Pohl"
date: "6/10/2024"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = T)
```

## First graph: Kaliningrad Bridge Problem

In our visual representation of the Königsberg bridges challenge, we employ vertices—denoted by V—to stand for Königsberg’s separate quarters, labeled according to the first letter of each area:

L for Lomse
V for Vorstadt-Haferberg
K for Kneiphof
A for Altstadt-Loebenicht
To depict the bridges linking these regions, we introduce edges—represented by e—assigned the letters p, q, r, s, t, u, and v.

These edges don’t dictate a fixed crossing direction, which tells us our graph is undirected. This contrasts with directed graphs, or digraphs, where each edge, resembling a one-way street, permits passage in just one specified direction.

Note that the resulting graph will not be a complete graph, i.e., a graph in which every vertex is connected to every other vertex by an edge.

Let’s proceed to construct our graph, denoted as G, utilizing the ‘igraph’ package. This package is instrumental not only for visualization but also for the analysis of structural patterns within networks. In the context of our example, we’ll explore the historic problem of the Seven Bridges of Königsberg.

To begin, we’ll load the ‘igraph’ library and establish two vectors: one for the vertices, representing the landmasses, and one for the edges, representing the bridges. The edges vector will pair the vertices to illustrate the bridges connecting the various landmasses. With these vectors prepared, we can generate graph G using the graph function and subsequently assign the appropriate vertex names for clarity.

Once the graph is constructed, you can inspect its structure by executing print(G) in the console. Simply inputting G will also display the graph’s adjacency list. To visualize G, enter plot(G) on a new line. This will invoke the plotting function and render a graphical representation of the network, allowing you to visually trace the paths between Königsberg’s neighborhoods and bridges.

```{r setup-one, message=F}
# Load the igraph package
if(!require(igraph)) install.packages("igraph"); library(igraph)
```

```{r}
# list available functions for the igraph package:
ls("package:igraph")
```


```{r graph-one}
# Define the vertices
vertices <- c("L", "V", "K", "A") 

# Define the edges (pairs of neighborhoods connected by a bridge)
edges <- c("L", "A",
           "L", "K",
           "L", "V",
           "V", "K",
           "A", "K",
           "K", "A",
           "K", "V")

# Create the graph from the edge list
G <- graph(edges, directed=FALSE)

# Add names to the vertices
V(G)$name <- vertices

# Plot the graph
plot(G)
print(G) #identical to 'G'

# Write your answer above this line
```

## Practice: Simple and multiple graphs

```{r simple-multiple-graphs}
## For demonstration purposes, we'll create a simple graph for seven islands in the Mediterranean Sea.

# Creating a data frame for Mediterranean islands with a single column for names.
mediterranean_islands <- data.frame(
  name = c(
    "Sicily", "Sardinia", "Cyprus", "Crete", "Corsica", "Mallorca", "Menorca"
  )
)

# Creating a data frame for the simple relations between the islands.
# Each pair of islands is connected by a single edge, with no island connected to itself.
relations <- data.frame(
  from = c(
    "Sicily", "Sicily", "Sardinia",
    "Cyprus", "Crete", "Corsica",
    "Corsica", "Mallorca", "Mallorca"
  ),
  to = c(
    "Sardinia", "Crete", "Corsica",
    "Crete", "Cyprus", "Mallorca",
    "Sicily", "Menorca", "Sardinia"
  )
)

# Using the igraph package to create a simple graph object from the relations data frame.
# This graph is undirected, meaning the relationships do not have a specified direction, reflecting the simple nature of the graph.
# The vertices are defined by the mediterranean_islands data frame.
g_med_isl <- graph_from_data_frame(relations, directed = FALSE, vertices = mediterranean_islands)

# Complete the code #
is_simple(g_med_isl)
any_multiple(g_med_isl)
count_multiple(g_med_isl)
any_loop(g_med_isl)
print(g_med_isl)
plot(g_med_isl)

# Write your answer above this line
```

## Practice: Creating and manipulating graphs

```{r create-and-manipulate-graphs}
# Load the igraph library
library(igraph)

# Create the graph using an edge list
G2 <- igraph::graph(
  edges = c(1, 2,
            2, 3,
            1, 4,
            2, 5,
            3, 5),
  n = 5,
  directed = FALSE
)

# Look into structure
print(G2)

# Visualise
plot(G2)
```

## Practice: The humpback whale migration Network

Humpback whales, as majestic migrators, traverse vast oceanic distances annually, visiting feeding and breeding grounds. These migration patterns are crucial for their survival and have significant ecological impacts. Understanding these patterns is vital for conservation efforts and ecological studies.

> I chose to recreate Fig 3. from Rizzo and Schulte, 2009 (https://doi.org/10.1017/S0025315409000332)

### Create Data Frames

Begin by creating two data frames in R. The first, whale_locations, will list various oceanic regions frequented by whales. The second, migration_routes, will detail the routes whales take from one region to another.

```{r humpback-migrations}

whale_locations <- data.frame(
  location = c("Bering Sea", "Japan", "Hawaii", "Alaska", "California", "Mexico", "Dominican Republic", 
               "Maine", "Nova Scotia", "Newfoundland", "Greenland", "Iceland")
)
 
migration_routes <- data.frame(
  from = c("Bering Sea", "Hawaii", "Hawaii", "Hawaii", "California", "Dominican Republic", "Dominican Republic", "Dominican Republic", "Dominican Republic", "Dominican Republic", "Alaska", "California"),
  to = c("Japan", "Alaska", "California", "Mexico", "Mexico", "Maine", "Newfoundland", "Greenland", "Iceland", "Nova Scotia", "California", "Alaska")
  
)

```

### Construct the Graph

Use the ‘igraph’ package to build a directed graph from these data frames. In this graph, each region is a vertex, and each migration route is a directed edge.

```{r}
g_humpback <- igraph::graph_from_data_frame(migration_routes, directed = T, vertices = whale_locations)
```

### Visualize the Graph
Analyze the graph by printing its structure and plotting it. This will help in identifying key migratory paths and regions that are central to whale migration.

```{r}
print(g_humpback)
plot(g_humpback) # looks nicer in this example
plot(g_humpback, layout = layout_with_gem, edge.curved = TRUE)
```
### Inspect the graph

```{r}

is.simple(g_humpback)
any_multiple(g_humpback)
which_multiple(g_humpback) 
count_multiple(g_humpback) 
any_loop(g_humpback)
which_loop(g_humpback)

```

```{r}

```

